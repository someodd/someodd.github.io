---
date: 2025-09-29
tags:
- sysadmin
- linux
- debian
title: Fixing a Full /boot in an `apt` Error Loop

---


You ran `apt upgrade`, but `/boot` was full. Now `apt` is broken and stuck in an error loop, complaining about a package it can't configure.

# Safety checks

```
df -h /boot
ls -lh /boot
uname -r
dpkg -l 'linux-image-*' | awk '/^ii/{print $2, $3}'
```

Be sure to keep the kernel you're currently running.

# Remove unused kernel(s)

I identified the one kernel I'm wasn't running and then purged it to free up space.

```
sudo apt purge linux-image-6.16.9+deb14-amd64
sudo reboot
```

# Hopefully avoid in future

I have a Framework 11 with nothing very fancy. If I understand correctly, when `MODULES=most` is present, images are generated that include drivers for like... basically everything? This is a safety/stability measure, I guess. However, I changed my `/etc/initramfs-tools/initramfs.conf`:

```
MODULES=dep
```

Luckily for me it guessed which modules to load correctly and I believe reduced the image sizes.

# Other notes

I also had this weird problem where for some reason `wireguard` figured it'd
depend on RT Linux kernel. I had to hold the rt kernel and manually install the amd64 package.

Original content in gopherspace: [gopher://gopher.someodd.zip:70/0/phlog/boot-full.gopher.txt](gopher://gopher.someodd.zip:70/0/phlog/boot-full.gopher.txt)
